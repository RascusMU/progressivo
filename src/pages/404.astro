---
import Layout from '../layouts/Layout.astro';

const title = "Stránka nenalezena | Progressivo";
// The 404 page content is specific and minimal, overriding general description.
const description = "Tahle stránka neexistuje.";
---

<Layout title={title} description={description}>
  <div class="container error-container">
    <div class="error-wrap">
      <h1 class="error-title">Tahle stránka neexistuje.</h1>

      <p class="error-redirect-note">
        Za <span id="redirect-count">12</span> sekund vás přesměrujeme na hlavní stránku.
      </p>

      <div class="error-signal"></div>
    </div>
  </div>
</Layout>

<script>
  const countSpan = document.getElementById('redirect-count');
  let seconds = 12;

  if (countSpan) {
    const interval = setInterval(() => {
      seconds--;
      countSpan.textContent = seconds.toString();

      if (seconds <= 0) {
        clearInterval(interval);
        window.location.href = '/';
      }
    }, 1000);
  }
</script>

<style>
  /*
   * Centering logic for the error message.
   * Using a dedicated container to handle vertical/horizontal centering
   * while allowing the inner .error-wrap to behave as inline-block.
   */
  .error-container {
    min-height: 60vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    /* Aligns the inline-block child to the left visually relative to this flex container,
       but we want it centered or positioned comfortably.
       The prompt shows "Tahle stránka neexistuje" on one line.
    */
    align-items: flex-start;
    padding-top: 4rem;
    padding-bottom: 8rem;
  }

  .error-wrap {
    display: inline-block; /* šířka podle textu */
  }

  .error-title {
    color: #d97706;
    font-weight: 500;
    white-space: nowrap;
    font-size: 1.5rem; /* ne obrovské */
    margin-bottom: 12px;
    line-height: 1.2;
    font-family: var(--font-heading); /* Ensure consistency with site fonts */
  }

  .error-redirect-note {
    color: #d97706;
    font-size: 0.9rem;
    margin-bottom: 12px;
    font-family: var(--font-body);
  }

  /* jemná pulzující linka */
  .error-signal {
    width: 70px;
    height: 2px;
    background: #d97706;
    margin-left: 12px;
    animation: signalPulse 1s ease-in-out infinite;
  }

  @keyframes signalPulse {
    0%   { opacity: 0.3; }
    50%  { opacity: 1; }
    100% { opacity: 0.3; }
  }

  /* Dark mode – zachovat čitelnost */
  /* Using global selector strategy often used in Astro or data-theme attribute */
  :global([data-theme="dark"]) .error-title,
  :global([data-theme="dark"]) .error-redirect-note,
  :global([data-theme="dark"]) .error-signal {
    color: #fbbf24; /* světlejší amber */
    background-color: #fbbf24; /* For the signal line background */
  }

  /* Reset background-color for text elements to transparent to avoid boxiness,
     only signal needs background color change.
  */
  :global([data-theme="dark"]) .error-title,
  :global([data-theme="dark"]) .error-redirect-note {
      background-color: transparent;
  }

  /* Ensure the signal line gets the background color update in dark mode */
  :global([data-theme="dark"]) .error-signal {
      background: #fbbf24;
  }
</style>
