---
import Layout from '../../layouts/Layout.astro';
import ContactForm from '../../components/ContactForm.astro';
import { getEntry, render } from 'astro:content';

export async function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'de' } },
    { params: { lang: 'es' } },
    { params: { lang: 'ru' } },
  ];
}

const { lang } = Astro.params;
const id = lang === 'cs' ? 'contact' : `${lang}/contact`;
const entry = await getEntry('pages', id);

const { Content } = entry ? await render(entry) : { Content: null };
const translations = {
    cs: 'Kontakt',
    en: 'Contact',
    de: 'Kontakt',
    es: 'Contacto',
    ru: 'Контакты'
};
const title = translations[lang] || translations.cs;
---

<Layout lang={lang} title={`${title} | Progressivo`}>
  <div class="page-header">
     <div class="container">
        <h1>{title}</h1>
     </div>
  </div>
  <main class="container page-content animate-on-scroll">
    {Content ? <div class="prose lg:prose-xl"><Content /></div> : <p>Obsah se připravuje.</p>}
    <ContactForm lang={lang} />
  </main>
</Layout>

<style>
  .page-header {
      background: linear-gradient(135deg, var(--color-bg-alt) 0%, var(--color-bg) 100%);
      padding: 4rem 0 2rem;
      border-bottom: 1px solid var(--color-border);
      margin-bottom: 2rem;
  }

  :global(.dark) .page-header {
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  }

  h1 {
      font-size: 3rem;
      font-weight: 700;
      color: var(--color-text);
      margin: 0;
  }

  .page-content {
      padding-top: 2rem;
      padding-bottom: 4rem;
  }
</style>
