---
import { getCollection, render } from 'astro:content';
import Layout from '../../../layouts/Layout.astro';

export async function getStaticPaths() {
  const services = await getCollection('services');

  const languages = ['en', 'de', 'ru', 'es'];

  const paths = [];

  for (const service of services) {
    const id = service.id;
    const parts = id.split('/');
    if (parts.length > 1 && languages.includes(parts[0])) {
      const lang = parts[0];
      const slug = parts.slice(1).join('/').replace(/\.md$/, '');

      paths.push({
        params: { lang, slug },
        props: { service },
      });
    }
  }

  return paths;
}

const { service } = Astro.props;
const { Content } = await render(service);
---

<Layout title={`${service.data.title} | Progressivo`} description={service.data.description} lang={Astro.params.lang}>
  <div class="page-header">
     <div class="container">
        <h1>{service.data.title}</h1>
     </div>
  </div>

  <article class="container page-content animate-on-scroll">
    <div class="prose lg:prose-xl mx-auto">
        <Content />
    </div>
  </article>
</Layout>

<style>
  .page-header {
      background: linear-gradient(135deg, var(--color-bg-alt) 0%, var(--color-bg) 100%);
      padding: 4rem 0 2rem;
      border-bottom: 1px solid var(--color-border);
      margin-bottom: 2rem;
  }

  :global(.dark) .page-header {
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  }

  h1 {
      font-size: 3rem;
      font-weight: 700;
      color: var(--color-text);
      margin: 0;
  }

  .page-content {
      padding-top: 2rem;
      padding-bottom: 4rem;
  }
</style>
